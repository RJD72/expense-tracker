function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t=globalThis,n={},a={},o=t.parcelRequire94c2;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire94c2=o),(0,o.register)("1GfNc",function(t,n){e(t.exports,"transactions",()=>c),e(t.exports,"loadTransactions",()=>y);var a=o("8hoa6"),i=o("ilpIi"),r=o("kDiTP");document.getElementById("googleSignInBtn").addEventListener("click",r.signInUser),document.getElementById("googleSignOutBtn").addEventListener("click",r.signOutUser);let d=(0,i.collection)(a.db,"transactions"),c=[],l=document.getElementById("transactionList"),s=document.getElementById("transactionForm"),u=document.getElementById("balance"),m=document.getElementById("income"),p=document.getElementById("expense");document.getElementById("date").defaultValue=new Date().toISOString().split("T")[0];let g=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",signDisplay:"always"});async function y(e){if(!e)return;c=[];let t=(0,i.query)(d,(0,i.where)("userId","==",e.uid));(await (0,i.getDocs)(t)).forEach(e=>{c.push({id:e.id,...e.data()})}),I(),h(),f()}function f(){let e=document.getElementById("monthly-view-container");e.innerHTML="";let t={};c.forEach(({date:e,amount:n,name:a,type:o})=>{let i=new Date(e),r=`${i.getFullYear()}-${(i.getMonth()+1).toString().padStart(2,"0")}`;t[r]||(t[r]=[]),t[r].push({name:a,amount:n,type:o,date:i.toDateString()})}),Object.entries(t).forEach(([t,n])=>{let a=document.createElement("div");a.classList.add("month-view");let o=document.createElement("h4");o.textContent=`${t}`,a.appendChild(o);let i=document.createElement("ul");n.forEach(({name:e,amount:t,type:n,date:a})=>{let o=document.createElement("li");o.classList.add("transaction-item"),o.classList.add("amount"),o.classList.add(`${n}`),o.innerHTML=`<strong style='color: black'>${e}:</strong>  ${E(t*("income"===n?1:-1))} ${a}`,i.appendChild(o)}),a.appendChild(i),e.appendChild(a)})}function E(e){return 0===e?g.format(0).replace(/^[+-]/,""):g.format(e)}function h(){let e=c.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),t=c.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);u.textContent=E(e-t).replace(/^\+/,""),m.textContent=E(e),p.textContent=E(-1*t)}function I(){l.innerHTML="",c.forEach(e=>{let t=function({id:e,name:t,amount:n,date:a,type:o}){let i=document.createElement("li");return i.innerHTML=`
    <div class="name">
      <h4>${t}</h4>
      <p>${new Date(a).toLocaleDateString()}</p>
    </div>
    <div class="amount ${o}">
      <span>${E(n*("income"===o?1:-1))}</span>
    </div>
  `,i.addEventListener("click",async()=>{confirm("Delete transaction?")&&(await L(e),f())}),f(),i}(e);l.appendChild(t)})}async function L(e){await (0,i.deleteDoc)((0,i.doc)(a.db,"transactions",e)),c.splice(c.findIndex(t=>t.id===e),1),I(),h()}document.addEventListener("DOMContentLoaded",()=>{(0,r.monitorAuthState)(e=>{e?y(e):(c.length=0,document.getElementById("transactionList").innerHTML="",document.getElementById("balance").textContent="$0.00",document.getElementById("income").textContent="$0.00",document.getElementById("expense").textContent="$0.00",document.getElementById("monthly-view-container").innerHTML="")})}),s.addEventListener("submit",async e=>{e.preventDefault();let t=new FormData(s);s.reset();let n=a.auth.currentUser;if(!n){alert("You must be logged in to add a transaction");return}let o={name:t.get("name"),amount:parseFloat(t.get("amount")),date:new Date(t.get("date")).toISOString(),type:"on"===t.get("type")?"expense":"income",userId:n.uid};if(!o.name||isNaN(o.amount)||!o.date){alert("Please fill in all fields correctly.");return}let r=await (0,i.addDoc)(d,o);c.push({id:r.id,...o}),I(),h()}),y()}),o("1GfNc");
//# sourceMappingURL=index.3d84b1c7.js.map
